- name: "[﬒ dotfiles] Get list of files to symlink"
  ansible.builtin.shell: "ls -1 ~/.dotfiles/files/dotfiles  > /tmp/dotfiles_symlinks_to_build"
  changed_when: false

- name: "[﬒ dotfiles] Store list of files into variable"
  ansible.builtin.shell: "cat /tmp/dotfiles_symlinks_to_build"
  register: filesToSymlink
  changed_when: false

- name: "[﬒ dotfiles] Set symlinks"
  ansible.builtin.file:
    src: '{{ ansible_env.PWD }}/files/dotfiles/{{ item }}'
    path: '~/.{{ item }}'
    state: link
  with_items:
    - "{{filesToSymlink.stdout_lines}}"

- name: "[﬒ dotfiles] Download Vundle (vi bundle manager)"
  ansible.builtin.git:
    repo: https://github.com/VundleVim/Vundle.vim.git
    dest: ~/.vim/bundle/Vundle.vim
  changed_when: false

- name: "[﬒ dotfiles] Setup and install Vundle"
  ansible.builtin.shell:
    cmd: echo | echo | vim +PluginInstall +qall &>/dev/null
  changed_when: false
